<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Financiero Pro X — Profesional</title>

  <!-- Tipografía y estilos -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <!-- Iconos -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <!-- Chart.js (opcional; si no está, app.js usa fallback canvas) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-slate-50 text-slate-800">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="logo">
      <h1>Financiero Pro X</h1>
      <span class="subtitle">Agronare · ERP</span>
    </div>
    <nav>
      <button data-tab="dashboard" class="nav-btn active"><i class="fa-solid fa-gauge"></i> Dashboard</button>
      <button data-tab="entrada" class="nav-btn"><i class="fa-solid fa-database"></i> Entrada de datos</button>
      <button data-tab="estados" class="nav-btn"><i class="fa-solid fa-scale-balanced"></i> Estados Financieros</button>
      <button data-tab="reportes" class="nav-btn"><i class="fa-solid fa-file-pdf"></i> Reportes & PDF</button>
      <button data-tab="ia" class="nav-btn"><i class="fa-solid fa-robot"></i> Análisis IA</button>
      <button data-tab="config" class="nav-btn"><i class="fa-solid fa-gear"></i> Configuración</button>
    </nav>
    <div class="user-box">
      <div class="avatar">AG</div>
      <div>
        <p class="name">Ángel caído del cielo</p>
        <p class="role">Gerente · Agronare</p>
      </div>
    </div>
  </aside>

  <!-- CONTENIDO -->
  <main class="content">
    <!-- HEADER -->
    <header class="header">
      <h2>Sistema Financiero Empresarial Pro X</h2>
      <p>Dashboard, captura y exportación profesional de estados financieros (Balance, Resultados, Flujos).</p>
      <div class="actions">
        <button id="theme-toggle" class="btn-outline"><i class="fa-solid fa-moon"></i> Tema</button>
        <button id="btn-preview" class="btn-blue"><i class="fa-solid fa-eye"></i> Preview PDF</button>
        <button id="btn-export-csv" class="btn-green"><i class="fa-solid fa-file-csv"></i> CSV</button>
        <button id="btn-export-xlsx" class="btn-green"><i class="fa-solid fa-file-excel"></i> XLSX</button>
      </div>
    </header>

    <!-- DASHBOARD -->
    <section id="tab-dashboard" class="tab-section">
      <div class="grid-4">
        <div class="kpi-card">
          <h3>Ventas del mes</h3>
          <p id="r-ventas">$0.00</p>
          <span class="kpi-positive">+0.0%</span>
        </div>
        <div class="kpi-card">
          <h3>Gastos</h3>
          <p id="r-gastos">$0.00</p>
          <span class="kpi-neutral">0.0%</span>
        </div>
        <div class="kpi-card">
          <h3>Activos</h3>
          <p id="r-activos">$0.00</p>
          <span class="kpi-neutral">–</span>
        </div>
        <div class="kpi-card">
          <h3>Pasivos</h3>
          <p id="r-pasivos">$0.00</p>
          <span class="kpi-negative">0%</span>
        </div>
      </div>

      <div class="grid-2 mt-6">
        <div class="card">
          <h4><i class="fa-solid fa-chart-line"></i> Tendencia de Ventas</h4>
          <canvas id="kpiChart" class="chart"></canvas>
        </div>
        <div class="card">
          <h4><i class="fa-solid fa-lightbulb"></i> Sugerencias</h4>
          <ul class="suggestions">
            <li>Completa los datos en “Estados Financieros” y presiona Calcular.</li>
            <li>Exporta CSV/XLSX desde los botones del encabezado.</li>
            <li>Genera tu PDF con membrete desde “Reportes & PDF”.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ENTRADA DE DATOS (placeholder) -->
    <section id="tab-entrada" class="tab-section hidden">
      <h2>Entrada de datos</h2>
      <div class="card">[Formulario para Razón social, RFC, parámetros, etc.]</div>
    </section>

    <!-- ESTADOS FINANCIEROS -->
    <section id="tab-estados" class="tab-section hidden">
      <h2>Estados Financieros</h2>

      <!-- BALANCE GENERAL -->
      <div class="grid-2">
        <div class="card">
          <h4><i class="fa-solid fa-building-columns"></i> Activos</h4>
          <input class="input-balance" id="act_caja" placeholder="Caja" />
          <input class="input-balance" id="act_bancos" placeholder="Bancos" />
          <input class="input-balance" id="act_cxc" placeholder="Cuentas por Cobrar" />
          <input class="input-balance" id="act_inventario" placeholder="Inventario" />
          <input class="input-balance" id="act_otros_corr" placeholder="Otros Activos Corrientes" />
          <hr style="border:none;border-top:1px solid #e5e7eb;margin:12px 0;" />
          <input class="input-balance" id="act_terrenos" placeholder="Terrenos" />
          <input class="input-balance" id="act_mobiliario" placeholder="Mobiliario" />
          <input class="input-balance" id="act_depre_mob" placeholder="( - ) Depreciación Mobiliario" />
          <input class="input-balance" id="act_trans" placeholder="Transporte" />
          <input class="input-balance" id="act_depre_trans" placeholder="( - ) Depreciación Transporte" />
          <div class="total">Total Activo: <span id="total-activo">$0.00</span></div>
        </div>

        <div class="card">
          <h4><i class="fa-solid fa-scale-balanced"></i> Pasivo y Patrimonio</h4>
          <input class="input-balance" id="pas_cxp" placeholder="Cuentas por Pagar" />
          <input class="input-balance" id="pas_isr" placeholder="ISR por Pagar" />
          <input class="input-balance" id="pas_prest_corto" placeholder="Préstamos Corto Plazo" />
          <hr style="border:none;border-top:1px solid #e5e7eb;margin:12px 0;" />
          <input class="input-balance" id="pas_prest_largo" placeholder="Préstamos Largo Plazo" />
          <input class="input-balance" id="pas_otros_no_corr" placeholder="Otros Pasivos No Corrientes" />
          <hr style="border:none;border-top:1px solid #e5e7eb;margin:12px 0;" />
          <input class="input-balance" id="pat_capital" placeholder="Capital Social" />
          <input class="input-balance" id="pat_reservas" placeholder="Reservas" />
          <input class="input-balance" id="pat_utilidad" placeholder="Utilidad/Pérdida del Ejercicio" />
          <div class="total">Total Pasivo y Patrimonio: <span id="total-pasivo">$0.00</span></div>
        </div>
      </div>
      <div style="margin-top:10px;">
        <button id="btn-calc-balance" class="btn-blue"><i class="fa-solid fa-calculator"></i> Calcular Balance</button>
      </div>

      <!-- ESTADO DE RESULTADOS -->
      <div class="card" style="margin-top:18px;">
        <h4><i class="fa-solid fa-file-invoice-dollar"></i> Estado de Resultados</h4>
        <div class="grid-4" style="grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px;">
          <div>
            <strong>Ingresos</strong>
            <input class="input-balance" id="res_ventas" placeholder="Ingresos por Ventas" />
            <input class="input-balance" id="res_devol" placeholder="Devoluciones y Rebajas" />
            <strong style="display:block;margin-top:8px;">Costo de Ventas</strong>
            <input class="input-balance" id="res_cogs" placeholder="COGS" />
          </div>
          <div>
            <strong>Gastos Operativos</strong>
            <input class="input-balance" id="res_gasto_ventas" placeholder="Sueldos/Comisiones (Ventas)" />
            <input class="input-balance" id="res_marketing" placeholder="Publicidad y Marketing" />
            <input class="input-balance" id="res_sueldos_admin" placeholder="Sueldos (Administración)" />
            <input class="input-balance" id="res_renta" placeholder="Renta" />
            <input class="input-balance" id="res_servpub" placeholder="Servicios Públicos" />
            <input class="input-balance" id="res_depre" placeholder="Depreciación y Amortización" />
          </div>
          <div>
            <strong>Otros</strong>
            <input class="input-balance" id="res_otros" placeholder="Otros Ingresos / (Gastos)" />
            <input class="input-balance" id="res_intereses" placeholder="Gastos por Intereses" />
            <input class="input-balance" id="res_isr" placeholder="Impuesto Sobre la Renta" />
            <div class="totales" style="margin-top:8px;">
              <div>Ventas Netas: <span id="res_ventas_netas">$0.00</span></div>
              <div>Utilidad Bruta: <span id="res_utilidad_bruta">$0.00</span></div>
              <div>EBIT: <span id="res_ebit">$0.00</span></div>
              <div>EBT: <span id="res_ebt">$0.00</span></div>
              <div>Utilidad Neta: <span id="res_neta">$0.00</span></div>
            </div>
          </div>
        </div>
        <div style="margin-top:10px;">
          <button id="btn-calc-result" class="btn-blue"><i class="fa-solid fa-calculator"></i> Calcular
            Resultados</button>
        </div>
      </div>

      <!-- FLUJO DE EFECTIVO + RATIOS -->
      <div class="grid-2" style="margin-top:18px;">
        <div class="card">
          <h4><i class="fa-solid fa-money-bill-transfer"></i> Flujo de Efectivo</h4>
          <input class="input-balance" id="flujo_depre" placeholder="Depreciación" />
          <input class="input-balance" id="flujo_captrabajo" placeholder="Capital de Trabajo" />
          <input class="input-balance" id="flujo_activos" placeholder="Compras de Activos" />
          <input class="input-balance" id="flujo_inversiones" placeholder="Inversiones" />
          <input class="input-balance" id="flujo_deuda" placeholder="Nueva Deuda" />
          <input class="input-balance" id="flujo_dividendos" placeholder="Dividendos" />
          <div class="total">Flujo Neto: <span id="flujo_total">$0.00</span></div>
          <button id="btn-calc-flujo" class="btn-blue" style="margin-top:10px;"><i class="fa-solid fa-calculator"></i>
            Calcular Flujo</button>
        </div>

        <div class="card">
          <h4><i class="fa-solid fa-chart-line"></i> Ratios Financieros</h4>
          <div>Liquidez: <strong id="ratio_liquidez">0.00</strong></div>
          <div>Endeudamiento: <strong id="ratio_endeudamiento">0.00</strong></div>
          <div>Rentabilidad: <strong id="ratio_rentabilidad">0.0%</strong></div>
          <button id="btn-calc-ratios" class="btn-blue" style="margin-top:10px;"><i class="fa-solid fa-calculator"></i>
            Calcular Ratios</button>
        </div>
      </div>
    </section>

    <!-- REPORTES -->
    <section id="tab-reportes" class="tab-section hidden">
      <h2>Reportes & PDF</h2>
      <div class="card">
        <p>Usa “Preview PDF” en el encabezado para generar un reporte imprimible con membrete.</p>
      </div>
    </section>

    <!-- ANÁLISIS IA -->
    <section id="tab-ia" class="tab-section hidden">
      <h2>Análisis con IA</h2>
      <div class="card">
        <p>Genera un reporte ejecutivo con IA (Gemini) a partir de tus datos cargados.</p>
        <button id="btn-analisis-ia" class="btn-blue"><i class="fa-solid fa-robot"></i> Generar análisis</button>
        <div id="ia-loader" class="kpi-neutral hidden" style="display:inline-block;margin-left:8px;">Procesando…</div>
        <div id="ia-result-container" style="margin-top:12px;"></div>
      </div>
    </section>

    <!-- CONFIGURACIÓN (placeholder) -->
    <section id="tab-config" class="tab-section hidden">
      <h2>Configuración</h2>
      <div class="card">[Preferencias de tema, perfil y ajustes]</div>
    </section>
  </main>

  <!-- Librerías locales/opcionales -->
  <script src="vendor/chart-lite.js"></script>
  <script src="vendor/xlsx.full.min.js"></script>
  <!-- App -->
  <script src="app.js"></script>
</body>

</html>